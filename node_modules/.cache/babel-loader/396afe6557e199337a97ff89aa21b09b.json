{"ast":null,"code":"import _slicedToArray from \"/home/valentin/Documents/LPDWEB/react/battlecat/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/valentin/Documents/LPDWEB/react/battlecat/src/components/pages/Fight.js\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Switch, Route, Redirect, Link } from 'react-router-dom';\nimport BreedImage from \"../items/BreedImage.js\";\n\nconst Fight = props => {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        resultFight = _useState2[0],\n        setResultFight = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        userCat = _useState4[0],\n        setUserCat = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        enemyCat = _useState6[0],\n        setEnemyCat = _useState6[1];\n\n  const headers = {\n    'x-api-key': '80ad793a-81c0-4987-a01a-cdf448c1b68d'\n  };\n  useEffect(() => {\n    console.log(props);\n    let objUserCat = props.location.fightProps.userCat[0];\n    let objEnemyCat = props.location.fightProps.enemyCat;\n    setUserCat(objUserCat);\n    setEnemyCat(objEnemyCat);\n    let attackingCat = \"userCat\";\n    let damages = 0;\n    console.log(userCat);\n    let interval = setInterval(() => {\n      switch (attackingCat) {\n        case \"userCat\":\n          damages = Math.floor(Math.random() * userCat.strength);\n          objEnemyCat.hp_max -= damages;\n          setEnemyCat(objEnemyCat);\n          attackingCat = \"enemyCat\";\n          break;\n\n        case \"enemyCat\":\n          damages = Math.floor(Math.random() * enemyCat.strength);\n          objUserCat.hp_max -= damages;\n          setUserCat(objUserCat);\n          attackingCat = \"userCat\";\n          break;\n\n        default:\n          break;\n      }\n\n      console.log(attackingCat);\n      console.log(damages);\n      console.log(enemyCat.hp_max);\n      console.log(userCat.hp_max);\n\n      if (userCat.hp_max <= 0 || enemyCat.hp_max <= 0) {\n        if (userCat.hp_max <= 0) {\n          setResultFight(\"lose\");\n        } else {\n          setResultFight(\"win\");\n        }\n\n        clearInterval(interval);\n      }\n    }, 200);\n  }, []);\n\n  const DisplayResult = () => {\n    if (resultFight == \"win\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Victoire\"));\n    } else if (resultFight == \"lose\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"D\\xE9faite\"));\n    } else {\n      return React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Fight !!!\");\n    }\n  };\n\n  return React.createElement(\"div\", {\n    id: \"fightPage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(DisplayResult, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"battleground\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"userSide\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: props.location.fightProps.userCat[0].image_url,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    id: \"userHP\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, userCat.hp_max), React.createElement(\"p\", {\n    id: \"userAction\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    id: \"enemySide\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: props.location.fightProps.userCat[0].image_url,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    id: \"enemyHP\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, enemyCat.hp_max), React.createElement(\"p\", {\n    id: \"enemyAction\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }))), React.createElement(Link, {\n    className: \"ghostButton\",\n    to: \"/search_cat\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Retour\"));\n};\n\nexport default Fight;","map":{"version":3,"sources":["/home/valentin/Documents/LPDWEB/react/battlecat/src/components/pages/Fight.js"],"names":["React","useEffect","useState","axios","Switch","Route","Redirect","Link","BreedImage","Fight","props","resultFight","setResultFight","userCat","setUserCat","enemyCat","setEnemyCat","headers","console","log","objUserCat","location","fightProps","objEnemyCat","attackingCat","damages","interval","setInterval","Math","floor","random","strength","hp_max","clearInterval","DisplayResult","image_url"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Switch, Route, Redirect, Link } from 'react-router-dom';\n\n\nimport BreedImage from \"../items/BreedImage.js\";\n\n\nconst Fight = props => {\nconst [resultFight, setResultFight] = useState(\"\");\nconst [userCat, setUserCat] = useState(\"\");\nconst [enemyCat, setEnemyCat] = useState(\"\");\n\n\n\n  const headers = {\n    'x-api-key': '80ad793a-81c0-4987-a01a-cdf448c1b68d'\n  }\n\n  useEffect(() => {\n    console.log(props)\n    \n    let objUserCat = props.location.fightProps.userCat[0];\n    let objEnemyCat = props.location.fightProps.enemyCat;\n\n    setUserCat(objUserCat);\n    setEnemyCat(objEnemyCat);\n\n    let attackingCat = \"userCat\";\n    let damages = 0;\n\n    console.log(userCat)\n\n      \n\n      let interval = setInterval(() => {\n        switch (attackingCat) {\n          case \"userCat\":\n              damages = Math.floor(Math.random() * userCat.strength);\n              objEnemyCat.hp_max -= damages;\n              setEnemyCat(objEnemyCat);\n              attackingCat = \"enemyCat\";\n            break;\n          case \"enemyCat\":\n              damages = Math.floor(Math.random() * enemyCat.strength);\n              objUserCat.hp_max -= damages;\n              setUserCat(objUserCat);\n              attackingCat = \"userCat\";\n          break;\n        \n          default:\n            break;\n        }\n        console.log(attackingCat);\n        console.log(damages);\n        console.log(enemyCat.hp_max);\n        console.log(userCat.hp_max);\n\n        if (userCat.hp_max <= 0 || enemyCat.hp_max <= 0) {\n          if (userCat.hp_max <= 0) {\n            setResultFight(\"lose\");\n          } else {\n            setResultFight(\"win\");\n          }\n          clearInterval(interval);\n        }\n      }, 200)\n    \n  }, []);\n\n  const DisplayResult = () => {\n    if (resultFight == \"win\") {\n      return (\n        <div>\n          <h2>Victoire</h2>\n        </div>\n      )\n    } else if (resultFight == \"lose\") {\n      return (\n        <div>\n          <h2>Défaite</h2>\n        </div>\n      )\n    } else {\n      return (\n        <h2>Fight !!!</h2>\n      )\n    }\n  }\n\n  return (\n    <div id=\"fightPage\">\n      <DisplayResult />\n      <div id=\"battleground\">\n        <div id=\"userSide\">\n          <img src={props.location.fightProps.userCat[0].image_url} alt=\"\"></img>\n          <p id=\"userHP\">{userCat.hp_max}</p>\n          <p id=\"userAction\"></p>\n        </div>\n        <div id=\"enemySide\">\n          <img src={props.location.fightProps.userCat[0].image_url} alt=\"\"></img>\n          <p id=\"enemyHP\">{enemyCat.hp_max}</p>\n          <p id=\"enemyAction\"></p>\n        </div>\n      </div>\n      \n      <Link className=\"ghostButton\" to=\"/search_cat\">Retour</Link>\n    </div>\n\n    \n  );\n};\n\nexport default Fight;"]},"metadata":{},"sourceType":"module"}