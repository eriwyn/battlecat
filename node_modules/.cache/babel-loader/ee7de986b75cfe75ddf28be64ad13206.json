{"ast":null,"code":"import _slicedToArray from \"/home/valentin/Documents/LPDWEB/react/battlecat/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/valentin/Documents/LPDWEB/react/battlecat/src/components/pages/Fight.js\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Switch, Route, Redirect, Link } from 'react-router-dom';\nimport BreedImage from \"../items/BreedImage.js\";\n\nconst Fight = props => {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        resultFight = _useState2[0],\n        setResultFight = _useState2[1];\n\n  const headers = {\n    'x-api-key': '80ad793a-81c0-4987-a01a-cdf448c1b68d'\n  };\n  useEffect(() => {\n    console.log(props);\n    let userCat = props.location.fightProps.userCat[0];\n    let enemyCat = props.location.fightProps.enemyCat;\n    let attackingCat = \"userCat\";\n    let damages = 0;\n    console.log(userCat);\n\n    while (userCat.hp_max > 0 && enemyCat.hp_max > 0) {\n      switch (attackingCat) {\n        case \"userCat\":\n          console.log(\"User\");\n          damages = Math.floor(Math.random() * userCat.strength);\n          console.log(damages);\n          enemyCat.hp_max -= damages;\n          console.log(enemyCat.hp_max);\n          attackingCat = \"enemyCat\";\n          break;\n\n        case \"enemyCat\":\n          console.log(\"Enemy\");\n          damages = Math.floor(Math.random() * enemyCat.strength);\n          console.log(damages);\n          userCat.hp_max -= damages;\n          console.log(userCat.hp_max);\n          attackingCat = \"userCat\";\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    if (userCat.hp_max <= 0) {\n      setResultFight(\"lose\");\n    } else {\n      setResultFight(\"win\");\n    }\n  }, []);\n\n  const DisplayResult = () => {\n    if (resultFight == \"win\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Victoire\"));\n    } else if (resultFight == \"lose\") {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"D\\xE9faite\"));\n    } else {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Combat en cours...\");\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(DisplayResult, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(Link, {\n    to: \"/search_cat\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Retour\"));\n};\n\nexport default Fight;","map":{"version":3,"sources":["/home/valentin/Documents/LPDWEB/react/battlecat/src/components/pages/Fight.js"],"names":["React","useEffect","useState","axios","Switch","Route","Redirect","Link","BreedImage","Fight","props","resultFight","setResultFight","headers","console","log","userCat","location","fightProps","enemyCat","attackingCat","damages","hp_max","Math","floor","random","strength","DisplayResult"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Switch, Route, Redirect, Link } from 'react-router-dom';\n\n\nimport BreedImage from \"../items/BreedImage.js\";\n\n\nconst Fight = props => {\n  const [resultFight, setResultFight] = useState(\"\");\n\n\n  const headers = {\n    'x-api-key': '80ad793a-81c0-4987-a01a-cdf448c1b68d'\n  }\n\n  useEffect(() => {\n    console.log(props)\n    \n    let userCat = props.location.fightProps.userCat[0];\n    let enemyCat = props.location.fightProps.enemyCat;\n\n    let attackingCat = \"userCat\";\n    let damages = 0;\n\n    console.log(userCat)\n\n    while (userCat.hp_max > 0 && enemyCat.hp_max > 0) {\n      switch (attackingCat) {\n        case \"userCat\":\n            console.log(\"User\");\n            damages = Math.floor(Math.random() * userCat.strength);\n            console.log(damages);\n            enemyCat.hp_max -= damages;\n            console.log(enemyCat.hp_max);\n            attackingCat = \"enemyCat\";\n          break;\n        case \"enemyCat\":\n            console.log(\"Enemy\");\n            damages = Math.floor(Math.random() * enemyCat.strength);\n            console.log(damages);\n            userCat.hp_max -= damages;\n            console.log(userCat.hp_max);\n            attackingCat = \"userCat\";\n        break;\n      \n        default:\n          break;\n      }\n    }\n\n    if (userCat.hp_max <= 0) {\n      setResultFight(\"lose\");\n    } else {\n      setResultFight(\"win\");\n    }\n  }, []);\n\n  const DisplayResult = () => {\n    if (resultFight == \"win\") {\n      return (\n        <div>\n          <h1>Victoire</h1>\n        </div>\n      )\n    } else if (resultFight == \"lose\") {\n      return (\n        <div>\n          <h1>DÃ©faite</h1>\n        </div>\n      )\n    } else {\n      return (\n        <p>Combat en cours...</p>\n      )\n    }\n  }\n\n  return (\n    <div>\n      <DisplayResult />\n      <Link to=\"/search_cat\">Retour</Link>\n    </div>\n\n    \n  );\n};\n\nexport default Fight;"]},"metadata":{},"sourceType":"module"}